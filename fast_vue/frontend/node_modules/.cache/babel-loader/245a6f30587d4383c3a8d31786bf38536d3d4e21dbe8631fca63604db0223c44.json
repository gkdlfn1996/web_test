{"ast":null,"code":"import \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"d-flex align-center mb-4\"\n};\nvar _hoisted_2 = {\n  key: 0,\n  \"class\": \"versions-section\"\n};\nvar _hoisted_3 = {\n  \"class\": \"note-section\"\n};\nvar _hoisted_4 = {\n  \"class\": \"my-note\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_v_autocomplete = _resolveComponent(\"v-autocomplete\");\n  var _component_v_btn = _resolveComponent(\"v-btn\");\n  var _component_v_textarea = _resolveComponent(\"v-textarea\");\n  var _component_v_data_table = _resolveComponent(\"v-data-table\");\n  var _component_v_container = _resolveComponent(\"v-container\");\n  var _component_v_main = _resolveComponent(\"v-main\");\n  var _component_v_app = _resolveComponent(\"v-app\");\n  return _openBlock(), _createBlock(_component_v_app, null, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_v_main, null, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_v_container, null, {\n            \"default\": _withCtx(function () {\n              return [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_v_autocomplete, {\n                modelValue: $setup.projectName,\n                \"onUpdate:modelValue\": [_cache[0] || (_cache[0] = function ($event) {\n                  return $setup.projectName = $event;\n                }), $setup.onProjectSelected],\n                label: \"Project\",\n                items: $setup.projects,\n                \"class\": \"mr-4\"\n              }, null, 8 /* PROPS */, [\"modelValue\", \"items\", \"onUpdate:modelValue\"]), _createVNode(_component_v_autocomplete, {\n                modelValue: $setup.selectedShotName,\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n                  return $setup.selectedShotName = $event;\n                }),\n                label: \"Shot\",\n                items: $setup.shots.map(function (s) {\n                  return s.code;\n                }),\n                disabled: !$setup.shots.length,\n                \"class\": \"mr-4\"\n              }, null, 8 /* PROPS */, [\"modelValue\", \"items\", \"disabled\"]), _createVNode(_component_v_btn, {\n                onClick: $setup.loadVersions,\n                disabled: !$setup.selectedShotName\n              }, {\n                \"default\": _withCtx(function () {\n                  return _cache[2] || (_cache[2] = [_createTextVNode(\"OK\")]);\n                }),\n                _: 1 /* STABLE */,\n                __: [2]\n              }, 8 /* PROPS */, [\"onClick\", \"disabled\"]), _createVNode(_component_v_btn, {\n                onClick: $setup.clear,\n                \"class\": \"ml-4\"\n              }, {\n                \"default\": _withCtx(function () {\n                  return _cache[3] || (_cache[3] = [_createTextVNode(\"Clear\")]);\n                }),\n                _: 1 /* STABLE */,\n                __: [3]\n              }, 8 /* PROPS */, [\"onClick\"])]), _createCommentVNode(\" 버전 목록 테이블 \"), $setup.versions.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", null, \"Version\", -1 /* CACHED */)), _createVNode(_component_v_data_table, {\n                headers: $setup.versionHeaders,\n                items: $setup.versions,\n                \"item-key\": \"id\",\n                \"class\": \"elevation-1\",\n                \"hide-default-footer\": \"\",\n                \"disable-pagination\": \"\"\n              }, {\n                \"item.note\": _withCtx(function (_ref) {\n                  var item = _ref.item;\n                  return [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h3\", null, \"My Draft Note (\" + _toDisplayString(item.code) + \")\", 1 /* TEXT */), _createVNode(_component_v_textarea, {\n                    label: \"여기에 노트를 작성하세요\",\n                    rows: \"3\",\n                    variant: \"outlined\"\n                  })]), _cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n                    \"class\": \"other-notes\"\n                  }, [_createElementVNode(\"h3\", null, \"Others Draft Notes\"), _createElementVNode(\"p\", null, \"다른 사람의 노트 내용이 여기에 실시간으로 표시됩니다.\")], -1 /* CACHED */))])];\n                }),\n                _: 1 /* STABLE */\n              }, 8 /* PROPS */, [\"headers\", \"items\"])])) : _createCommentVNode(\"v-if\", true)];\n            }),\n            _: 1 /* STABLE */\n          })];\n        }),\n        _: 1 /* STABLE */\n      })];\n    }),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["_createBlock","_component_v_app","_createVNode","_component_v_main","_component_v_container","_createElementVNode","_hoisted_1","_component_v_autocomplete","$setup","projectName","$event","onProjectSelected","label","items","projects","selectedShotName","shots","map","s","code","disabled","length","_component_v_btn","onClick","loadVersions","_cache","clear","_createCommentVNode","versions","_createElementBlock","_hoisted_2","_component_v_data_table","headers","versionHeaders","_withCtx","_ref","item","_hoisted_3","_hoisted_4","_toDisplayString","_component_v_textarea","rows","variant"],"sources":["/home/idea/td_test/LAZYPIC/PONO/web_test/fast_vue/frontend/src/App.vue"],"sourcesContent":["<template>\n  <v-app>\n    <v-main>\n      <v-container>\n        <div class=\"d-flex align-center mb-4\">\n          <v-autocomplete\n            v-model=\"projectName\"\n            label=\"Project\"\n            :items=\"projects\"\n            @update:modelValue=\"onProjectSelected\"\n            class=\"mr-4\"\n          ></v-autocomplete>\n          <v-autocomplete\n            v-model=\"selectedShotName\"\n            label=\"Shot\"\n            :items=\"shots.map(s => s.code)\"\n            :disabled=\"!shots.length\"\n            class=\"mr-4\"\n          ></v-autocomplete>\n          <v-btn @click=\"loadVersions\" :disabled=\"!selectedShotName\">OK</v-btn>\n          <v-btn @click=\"clear\" class=\"ml-4\">Clear</v-btn>\n        </div>\n\n        <!-- 버전 목록 테이블 -->\n        <div class=\"versions-section\" v-if=\"versions.length\">\n          <h2>Version</h2>\n          <v-data-table\n            :headers=\"versionHeaders\"\n            :items=\"versions\"\n            item-key=\"id\"\n            class=\"elevation-1\"\n            hide-default-footer\n            disable-pagination\n          >\n            <template v-slot:item.note=\"{ item }\">\n              <div class=\"note-section\">\n                <div class=\"my-note\">\n                  <h3>My Draft Note ({{ item.code }})</h3>\n                  <v-textarea\n                    label=\"여기에 노트를 작성하세요\"\n                    rows=\"3\"\n                    variant=\"outlined\"\n                  ></v-textarea>\n                </div>\n                <div class=\"other-notes\">\n                  <h3>Others Draft Notes</h3>\n                  <p>다른 사람의 노트 내용이 여기에 실시간으로 표시됩니다.</p>\n                </div>\n              </div>\n            </template>\n          </v-data-table>\n        </div>\n      </v-container>\n    </v-main>\n  </v-app>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport { fetchShots, fetchProjects, fetchVersionsForShot } from './api'\nimport axios from 'axios'; // axios 임포트 추가\n\nexport default {\n  setup() {\n    const projectName = ref('')\n    const projects = ref([])\n    const shots = ref([]) // 선택된 프로젝트의 샷 목록 (autocomplete items)\n    const versions = ref([]) // 버전 목록을 저장할 ref 추가\n    const selectedShotName = ref('') // 선택된 샷 이름\n\n    // DB 테스트 관련 변수 추가\n    const dbTestResult = ref(null);\n    const dbTestError = ref(null);\n\n  onMounted(\n      async () => {\n        const projData = await fetchProjects()\n        projects.value = projData.projects || []\n    })\n\n    // 프로젝트 선택 시 해당 프로젝트의 샷 목록을 불러오는 함수\n    async function onProjectSelected() {\n      selectedShotName.value = ''; // 프로젝트 변경 시 샷 선택 초기화\n      versions.value = []; // 프로젝트 변경 시 버전 목록 초기화\n      if (projectName.value) {\n        const data = await fetchShots(projectName.value);\n        shots.value = data.shots || [];\n      } else {\n        shots.value = [];\n      }\n    }\n\n    // 선택된 샷의 버전 목록을 불러오는 함수\n    async function loadVersions() {\n      const selectedShot = shots.value.find(s => s.code === selectedShotName.value);\n      if (selectedShot) {\n        const data = await fetchVersionsForShot(selectedShot.id);\n        versions.value = data.versions || [];\n      }\n    }\n\n    function clear() {\n      projectName.value = ''\n      shots.value = []\n      versions.value = [] // 버전 목록도 초기화\n      selectedShotName.value = '' // 선택된 샷 이름도 초기화\n    }\n\n    // DB 연결 테스트 메서드 추가\n    async function testDbConnection() {\n      dbTestResult.value = null;\n      dbTestError.value = null;\n      try {\n        const response = await axios.get('http://localhost:8001/db-test');\n        dbTestResult.value = response.data.message;\n      } catch (error) {\n        console.error('DB 연결 테스트 중 에러 발생:', error);\n        dbTestError.value = error.message;\n        if (error.response && error.response.data && error.response.data.message) {\n          dbTestError.value = error.response.data.message;\n        }\n      }\n    }\n\n    // v-data-table을 위한 헤더 정의\n    const versionHeaders = [\n      { title: 'Version Name', key: 'code', sortable: false },\n      { title: 'Note', key: 'note', sortable: false },\n    ];\n\n    return {\n      projectName,\n      projects,\n      shots,\n      selectedShotName, // 반환 객체에 추가\n      versions, // 반환 객체에 추가\n      onProjectSelected, // 반환 객체에 추가\n      loadVersions, // 반환 객체에 추가\n      clear,\n      versionHeaders, // 반환 객체에 추가\n      dbTestResult, // 반환 객체에 추가\n      dbTestError,  // 반환 객체에 추가\n      testDbConnection // 반환 객체에 추가\n    }\n  }\n}\n</script>\n\n<style src=\"./assets/styles.css\"></style>"],"mappings":";;;;;;EAIa,SAAM;AAA0B;;;EAoBhC,SAAM;;;EAWA,SAAM;AAAc;;EAClB,SAAM;AAAS;;;;;;;;;uBAnClCA,YAAA,CAqDQC,gBAAA;wBApDN;MAAA,OAmDS,CAnDTC,YAAA,CAmDSC,iBAAA;4BAlDP;UAAA,OAiDc,CAjDdD,YAAA,CAiDcE,sBAAA;gCAhDZ;cAAA,OAiBM,CAjBNC,mBAAA,CAiBM,OAjBNC,UAiBM,GAhBJJ,YAAA,CAMkBK,yBAAA;4BALPC,MAAA,CAAAC,WAAW;;yBAAXD,MAAA,CAAAC,WAAW,GAAAC,MAAA;gBAAA,IAGAF,MAAA,CAAAG,iBAAiB,C;gBAFrCC,KAAK,EAAC,SAAS;gBACdC,KAAK,EAAEL,MAAA,CAAAM,QAAQ;gBAEhB,SAAM;uFAERZ,YAAA,CAMkBK,yBAAA;4BALPC,MAAA,CAAAO,gBAAgB;;yBAAhBP,MAAA,CAAAO,gBAAgB,GAAAL,MAAA;gBAAA;gBACzBE,KAAK,EAAC,MAAM;gBACXC,KAAK,EAAEL,MAAA,CAAAQ,KAAK,CAACC,GAAG,CAAC,UAAAC,CAAC;kBAAA,OAAIA,CAAC,CAACC,IAAI;gBAAA;gBAC5BC,QAAQ,GAAGZ,MAAA,CAAAQ,KAAK,CAACK,MAAM;gBACxB,SAAM;4EAERnB,YAAA,CAAqEoB,gBAAA;gBAA7DC,OAAK,EAAEf,MAAA,CAAAgB,YAAY;gBAAGJ,QAAQ,GAAGZ,MAAA,CAAAO;;oCAAkB;kBAAA,OAAEU,MAAA,QAAAA,MAAA,O,iBAAF,IAAE,E;;;;0DAC7DvB,YAAA,CAAgDoB,gBAAA;gBAAxCC,OAAK,EAAEf,MAAA,CAAAkB,KAAK;gBAAE,SAAM;;oCAAO;kBAAA,OAAKD,MAAA,QAAAA,MAAA,O,iBAAL,OAAK,E;;;;gDAG1CE,mBAAA,eAAkB,EACkBnB,MAAA,CAAAoB,QAAQ,CAACP,MAAM,I,cAAnDQ,mBAAA,CA2BM,OA3BNC,UA2BM,G,0BA1BJzB,mBAAA,CAAgB,YAAZ,SAAO,qBACXH,YAAA,CAwBe6B,uBAAA;gBAvBZC,OAAO,EAAExB,MAAA,CAAAyB,cAAc;gBACvBpB,KAAK,EAAEL,MAAA,CAAAoB,QAAQ;gBAChB,UAAQ,EAAC,IAAI;gBACb,SAAM,aAAa;gBACnB,qBAAmB,EAAnB,EAAmB;gBACnB,oBAAkB,EAAlB;;gBAEiB,WAAS,EAAAM,QAAA,CACxB,UAAAC,IAAA;kBAAA,IAD4BC,IAAI,GAAAD,IAAA,CAAJC,IAAI;kBAAA,QAChC/B,mBAAA,CAaM,OAbNgC,UAaM,GAZJhC,mBAAA,CAOM,OAPNiC,UAOM,GANJjC,mBAAA,CAAwC,YAApC,iBAAe,GAAAkC,gBAAA,CAAGH,IAAI,CAACjB,IAAI,IAAG,GAAC,iBACnCjB,YAAA,CAIcsC,qBAAA;oBAHZ5B,KAAK,EAAC,eAAe;oBACrB6B,IAAI,EAAC,GAAG;oBACRC,OAAO,EAAC;kDAGZrC,mBAAA,CAGM;oBAHD,SAAM;kBAAa,IACtBA,mBAAA,CAA2B,YAAvB,oBAAkB,GACtBA,mBAAA,CAAqC,WAAlC,gCAA8B,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}