{"ast":null,"code":"import \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/web.dom-exception.constructor.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/web.dom-exception.to-string-tag.js\";\nimport \"core-js/modules/web.structured-clone.js\";\nimport { Fragment as _Fragment, mergeProps as _mergeProps, createVNode as _createVNode, createElementVNode as _createElementVNode } from \"vue\";\n// Components\nimport { VBtn } from \"../VBtn/index.js\"; // Composables\nimport { useLocale } from \"../../composables/index.js\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.js\"; // Utilities\nimport { computed, ref, toRaw, watchEffect } from 'vue';\nimport { deepEqual, genericComponent, propsFactory, useRender } from \"../../util/index.js\"; // Types\nexport var makeVConfirmEditProps = propsFactory({\n  modelValue: null,\n  color: String,\n  cancelText: {\n    type: String,\n    \"default\": '$vuetify.confirmEdit.cancel'\n  },\n  okText: {\n    type: String,\n    \"default\": '$vuetify.confirmEdit.ok'\n  },\n  disabled: {\n    type: [Boolean, Array],\n    \"default\": undefined\n  },\n  hideActions: Boolean\n}, 'VConfirmEdit');\nexport var VConfirmEdit = genericComponent()({\n  name: 'VConfirmEdit',\n  props: makeVConfirmEditProps(),\n  emits: {\n    cancel: function cancel() {\n      return true;\n    },\n    save: function save(value) {\n      return true;\n    },\n    'update:modelValue': function updateModelValue(value) {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n      slots = _ref.slots;\n    var model = useProxiedModel(props, 'modelValue');\n    var internalModel = ref();\n    watchEffect(function () {\n      internalModel.value = structuredClone(toRaw(model.value));\n    });\n    var _useLocale = useLocale(),\n      t = _useLocale.t;\n    var isPristine = computed(function () {\n      return deepEqual(model.value, internalModel.value);\n    });\n    function isActionDisabled(action) {\n      if (typeof props.disabled === 'boolean') {\n        return props.disabled;\n      }\n      if (Array.isArray(props.disabled)) {\n        return props.disabled.includes(action);\n      }\n      return isPristine.value;\n    }\n    var isSaveDisabled = computed(function () {\n      return isActionDisabled('save');\n    });\n    var isCancelDisabled = computed(function () {\n      return isActionDisabled('cancel');\n    });\n    function save() {\n      model.value = internalModel.value;\n      emit('save', internalModel.value);\n    }\n    function cancel() {\n      internalModel.value = structuredClone(toRaw(model.value));\n      emit('cancel');\n    }\n    function actions(actionsProps) {\n      return _createElementVNode(_Fragment, null, [_createVNode(VBtn, _mergeProps({\n        \"disabled\": isCancelDisabled.value,\n        \"variant\": \"text\",\n        \"color\": props.color,\n        \"onClick\": cancel,\n        \"text\": t(props.cancelText)\n      }, actionsProps), null), _createVNode(VBtn, _mergeProps({\n        \"disabled\": isSaveDisabled.value,\n        \"variant\": \"text\",\n        \"color\": props.color,\n        \"onClick\": save,\n        \"text\": t(props.okText)\n      }, actionsProps), null)]);\n    }\n    var actionsUsed = false;\n    useRender(function () {\n      var _slots$default;\n      return _createElementVNode(_Fragment, null, [(_slots$default = slots[\"default\"]) === null || _slots$default === void 0 ? void 0 : _slots$default.call(slots, {\n        model: internalModel,\n        save: save,\n        cancel: cancel,\n        isPristine: isPristine.value,\n        get actions() {\n          actionsUsed = true;\n          return actions;\n        }\n      }), !props.hideActions && !actionsUsed && actions()]);\n    });\n    return {\n      save: save,\n      cancel: cancel,\n      isPristine: isPristine\n    };\n  }\n});","map":{"version":3,"names":["VBtn","useLocale","useProxiedModel","computed","ref","toRaw","watchEffect","deepEqual","genericComponent","propsFactory","useRender","makeVConfirmEditProps","modelValue","color","String","cancelText","type","okText","disabled","Boolean","Array","undefined","hideActions","VConfirmEdit","name","props","emits","cancel","save","value","updateModelValue","setup","_ref","emit","slots","model","internalModel","structuredClone","_useLocale","t","isPristine","isActionDisabled","action","isArray","includes","isSaveDisabled","isCancelDisabled","actions","actionsProps","_createElementVNode","_Fragment","_createVNode","_mergeProps","actionsUsed","_slots$default","call"],"sources":["../../../src/components/VConfirmEdit/VConfirmEdit.tsx"],"sourcesContent":["// Components\nimport { VBtn } from '@/components/VBtn'\n\n// Composables\nimport { useLocale } from '@/composables'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { computed, ref, toRaw, watchEffect } from 'vue'\nimport { deepEqual, genericComponent, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { PropType, Ref, VNode } from 'vue'\nimport type { GenericProps } from '@/util'\n\nexport type VConfirmEditSlots<T> = {\n  default: {\n    model: Ref<T>\n    save: () => void\n    cancel: () => void\n    isPristine: boolean\n    get actions (): (props?: {}) => VNode\n  }\n}\n\nexport const makeVConfirmEditProps = propsFactory({\n  modelValue: null,\n  color: String,\n  cancelText: {\n    type: String,\n    default: '$vuetify.confirmEdit.cancel',\n  },\n  okText: {\n    type: String,\n    default: '$vuetify.confirmEdit.ok',\n  },\n  disabled: {\n    type: [Boolean, Array] as PropType<boolean | ('save' | 'cancel')[]>,\n    default: undefined,\n  },\n  hideActions: Boolean,\n}, 'VConfirmEdit')\n\nexport const VConfirmEdit = genericComponent<new <T> (\n  props: {\n    modelValue?: T\n    'onUpdate:modelValue'?: (value: T) => void\n    'onSave'?: (value: T) => void\n  },\n  slots: VConfirmEditSlots<T>\n) => GenericProps<typeof props, typeof slots>>()({\n  name: 'VConfirmEdit',\n\n  props: makeVConfirmEditProps(),\n\n  emits: {\n    cancel: () => true,\n    save: (value: any) => true,\n    'update:modelValue': (value: any) => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const model = useProxiedModel(props, 'modelValue')\n    const internalModel = ref()\n    watchEffect(() => {\n      internalModel.value = structuredClone(toRaw(model.value))\n    })\n\n    const { t } = useLocale()\n\n    const isPristine = computed(() => {\n      return deepEqual(model.value, internalModel.value)\n    })\n\n    function isActionDisabled (action: 'save' | 'cancel') {\n      if (typeof props.disabled === 'boolean') {\n        return props.disabled\n      }\n\n      if (Array.isArray(props.disabled)) {\n        return props.disabled.includes(action)\n      }\n\n      return isPristine.value\n    }\n\n    const isSaveDisabled = computed(() => isActionDisabled('save'))\n    const isCancelDisabled = computed(() => isActionDisabled('cancel'))\n\n    function save () {\n      model.value = internalModel.value\n      emit('save', internalModel.value)\n    }\n\n    function cancel () {\n      internalModel.value = structuredClone(toRaw(model.value))\n      emit('cancel')\n    }\n\n    function actions (actionsProps?: {}) {\n      return (\n        <>\n          <VBtn\n            disabled={ isCancelDisabled.value }\n            variant=\"text\"\n            color={ props.color }\n            onClick={ cancel }\n            text={ t(props.cancelText) }\n            { ...actionsProps }\n          />\n\n          <VBtn\n            disabled={ isSaveDisabled.value }\n            variant=\"text\"\n            color={ props.color }\n            onClick={ save }\n            text={ t(props.okText) }\n            { ...actionsProps }\n          />\n        </>\n      )\n    }\n\n    let actionsUsed = false\n    useRender(() => {\n      return (\n        <>\n          {\n            slots.default?.({\n              model: internalModel,\n              save,\n              cancel,\n              isPristine: isPristine.value,\n              get actions () {\n                actionsUsed = true\n                return actions\n              },\n            })\n          }\n\n          { !props.hideActions && !actionsUsed && actions() }\n        </>\n      )\n    })\n\n    return {\n      save,\n      cancel,\n      isPristine,\n    }\n  },\n})\n\nexport type VConfirmEdit = InstanceType<typeof VConfirmEdit>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}