{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nvar _hoisted_1 = {\n  key: 0,\n  \"class\": \"versions-section\"\n};\nvar _hoisted_2 = {\n  \"class\": \"note-section\"\n};\nvar _hoisted_3 = {\n  \"class\": \"my-note\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_v_textarea = _resolveComponent(\"v-textarea\");\n  var _component_v_data_table = _resolveComponent(\"v-data-table\");\n  return $props.versions.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[1] || (_cache[1] = _createElementVNode(\"h2\", null, \"Version\", -1 /* CACHED */)), _createVNode(_component_v_data_table, {\n    headers: $setup.versionHeaders,\n    items: $props.versions,\n    \"item-key\": \"id\",\n    \"class\": \"elevation-1\",\n    \"hide-default-footer\": \"\",\n    \"disable-pagination\": \"\"\n  }, {\n    \"item.note\": _withCtx(function (_ref) {\n      var item = _ref.item;\n      return [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h3\", null, \"My Draft Note (\" + _toDisplayString(item.code) + \")\", 1 /* TEXT */), _createVNode(_component_v_textarea, {\n        label: \"여기에 노트를 작성하세요\",\n        rows: \"3\",\n        modelValue: $setup.localNotesContent[item.id],\n        \"onUpdate:modelValue\": function onUpdateModelValue($event) {\n          return $setup.localNotesContent[item.id] = $event;\n        },\n        onInput: function onInput($event) {\n          return $setup.emit('input-note', item.id, $setup.localNotesContent[item.id]);\n        },\n        onBlur: function onBlur($event) {\n          return $setup.emit('save-note', item.id, $setup.localNotesContent[item.id]);\n        },\n        variant: \"outlined\",\n        \"class\": _normalizeClass({\n          'saving-note': $props.isSaving\n        })\n      }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\", \"onInput\", \"onBlur\", \"class\"])]), _cache[0] || (_cache[0] = _createElementVNode(\"div\", {\n        \"class\": \"other-notes\"\n      }, [_createElementVNode(\"h3\", null, \"Others Draft Notes\"), _createElementVNode(\"p\", null, \"다른 사람의 노트 내용이 여기에 실시간으로 표시됩니다.\")], -1 /* CACHED */))])];\n    }),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"items\"])])) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"names":["$props","versions","length","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_v_data_table","headers","$setup","versionHeaders","items","_withCtx","_ref","item","_hoisted_2","_hoisted_3","_toDisplayString","code","_component_v_textarea","label","rows","localNotesContent","id","$event","onInput","emit","onBlur","variant","_normalizeClass","isSaving"],"sources":["/home/idea/td_test/LAZYPIC/PONO/web_test/fast_vue/frontend/src/components/VersionTable.vue"],"sourcesContent":["<!-- frontend/src/components/VersionTable.vue -->\n<template>\n  <div class=\"versions-section\" v-if=\"versions.length\">\n    <h2>Version</h2>\n    <v-data-table\n      :headers=\"versionHeaders\"\n      :items=\"versions\"\n      item-key=\"id\"\n      class=\"elevation-1\"\n      hide-default-footer\n      disable-pagination\n    >\n      <template v-slot:item.note=\"{ item }\">\n        <div class=\"note-section\">\n          <div class=\"my-note\">\n            <h3>My Draft Note ({{ item.code }})</h3>\n            <v-textarea\n              label=\"여기에 노트를 작성하세요\"\n              rows=\"3\"\n              v-model=\"localNotesContent[item.id]\"\n              @input=\"emit('input-note', item.id, localNotesContent[item.id])\"\n              @blur=\"emit('save-note', item.id, localNotesContent[item.id])\"\n              variant=\"outlined\"\n              :class=\"{ 'saving-note': isSaving }\"\n            ></v-textarea>\n          </div>\n          <div class=\"other-notes\">\n            <h3>Others Draft Notes</h3>\n            <p>다른 사람의 노트 내용이 여기에 실시간으로 표시됩니다.</p>\n          </div>\n        </div>\n      </template>\n    </v-data-table>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue';\n\nconst props = defineProps({\n  versions: Array,\n  notes: Object, // notesContent 객체 (초기값 및 외부 업데이트용)\n  notesComposable: Object, // notes composable 전체를 받음\n  isSaving: Object, // isSaving prop 타입을 Object로 변경\n});\n\nconst emit = defineEmits(['save-note', 'input-note']); // emit 이벤트 추가\n\nconst versionHeaders = [\n  { title: 'Version', key: 'code', sortable: false },\n  { title: 'Note', key: 'note', sortable: false },\n];\n\n// 로컬 노트 내용을 저장할 반응형 객체\nconst localNotesContent = ref({});\n\n// props.notes가 변경될 때 localNotesContent를 초기화\nwatch(() => props.notes, (newNotes) => {\n  localNotesContent.value = { ...newNotes };\n}, { immediate: true, deep: true });\n\n// isSaving prop을 감시하여 콘솔에 출력 (디버깅용)\nwatch(() => props.isSaving, (newIsSaving) => {\n  console.log('VersionTable received isSaving:', JSON.stringify(newIsSaving));\n}, { immediate: true, deep: true });\n\nconst handleInput = (versionId, value) => {\n  localNotesContent.value[versionId] = value;\n  emit('input-note', versionId, value);\n};\n\nconst handleBlur = (versionId) => {\n  // 현재 로컬 컨텐츠를 가지고 save-note 이벤트를 발생시킨다.\n  emit('save-note', versionId, localNotesContent.value[versionId]);\n};\n\n\n</script>\n\n<style scoped>\n.saving-note {\n  transition: background-color 0.5s ease-in-out; /* 트랜지션 시간 증가 */\n  background-color: #ffeb3b; /* 더 눈에 띄는 노란색 배경 */\n}\n/* 저장 완료 후 원래 색상으로 돌아오도록 CSS 트랜지션 추가 */\n/* 필요한 스타일이 있다면 여기에 추가 */\n</style>"],"mappings":";;;EAEO,SAAM;;;EAWA,SAAM;AAAc;;EAClB,SAAM;AAAS;;;;SAZQA,MAAA,CAAAC,QAAQ,CAACC,MAAM,I,cAAnDC,mBAAA,CA+BM,OA/BNC,UA+BM,G,0BA9BJC,mBAAA,CAAgB,YAAZ,SAAO,qBACXC,YAAA,CA4BeC,uBAAA;IA3BZC,OAAO,EAAEC,MAAA,CAAAC,cAAc;IACvBC,KAAK,EAAEX,MAAA,CAAAC,QAAQ;IAChB,UAAQ,EAAC,IAAI;IACb,SAAM,aAAa;IACnB,qBAAmB,EAAnB,EAAmB;IACnB,oBAAkB,EAAlB;;IAEiB,WAAS,EAAAW,QAAA,CACxB,UAAAC,IAAA;MAAA,IAD4BC,IAAI,GAAAD,IAAA,CAAJC,IAAI;MAAA,QAChCT,mBAAA,CAiBM,OAjBNU,UAiBM,GAhBJV,mBAAA,CAWM,OAXNW,UAWM,GAVJX,mBAAA,CAAwC,YAApC,iBAAe,GAAAY,gBAAA,CAAGH,IAAI,CAACI,IAAI,IAAG,GAAC,iBACnCZ,YAAA,CAQca,qBAAA;QAPZC,KAAK,EAAC,eAAe;QACrBC,IAAI,EAAC,GAAG;oBACCZ,MAAA,CAAAa,iBAAiB,CAACR,IAAI,CAACS,EAAE;;iBAAzBd,MAAA,CAAAa,iBAAiB,CAACR,IAAI,CAACS,EAAE,IAAAC,MAAA;QAAA;QACjCC,OAAK,WAALA,OAAKA,CAAAD,MAAA;UAAA,OAAEf,MAAA,CAAAiB,IAAI,eAAeZ,IAAI,CAACS,EAAE,EAAEd,MAAA,CAAAa,iBAAiB,CAACR,IAAI,CAACS,EAAE;QAAA;QAC5DI,MAAI,WAAJA,MAAIA,CAAAH,MAAA;UAAA,OAAEf,MAAA,CAAAiB,IAAI,cAAcZ,IAAI,CAACS,EAAE,EAAEd,MAAA,CAAAa,iBAAiB,CAACR,IAAI,CAACS,EAAE;QAAA;QAC3DK,OAAO,EAAC,UAAU;QACjB,SAAKC,eAAA;UAAA,eAAmB7B,MAAA,CAAA8B;QAAQ;gIAGrCzB,mBAAA,CAGM;QAHD,SAAM;MAAa,IACtBA,mBAAA,CAA2B,YAAvB,oBAAkB,GACtBA,mBAAA,CAAqC,WAAlC,gCAA8B,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}