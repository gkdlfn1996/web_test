{"ast":null,"code":"import \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"d-flex align-center mb-4\"\n};\nvar _hoisted_2 = {\n  key: 0,\n  \"class\": \"versions-section\"\n};\nvar _hoisted_3 = {\n  \"class\": \"note-section\"\n};\nvar _hoisted_4 = {\n  \"class\": \"my-note\"\n};\nexport function render(_ctx, _cache) {\n  var _component_v_card_title = _resolveComponent(\"v-card-title\");\n  var _component_v_text_field = _resolveComponent(\"v-text-field\");\n  var _component_v_alert = _resolveComponent(\"v-alert\");\n  var _component_v_btn = _resolveComponent(\"v-btn\");\n  var _component_v_card_text = _resolveComponent(\"v-card-text\");\n  var _component_v_card = _resolveComponent(\"v-card\");\n  var _component_v_container = _resolveComponent(\"v-container\");\n  var _component_v_autocomplete = _resolveComponent(\"v-autocomplete\");\n  var _component_v_textarea = _resolveComponent(\"v-textarea\");\n  var _component_v_data_table = _resolveComponent(\"v-data-table\");\n  var _component_v_main = _resolveComponent(\"v-main\");\n  var _component_v_app = _resolveComponent(\"v-app\");\n  return _openBlock(), _createBlock(_component_v_app, null, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_v_main, null, {\n        \"default\": _withCtx(function () {\n          return [_createCommentVNode(\" 로그인 섹션 \"), _createVNode(_component_v_container, {\n            \"class\": \"login-section\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [!_ctx.loggedInUser ? (_openBlock(), _createBlock(_component_v_card, {\n                key: 0,\n                \"class\": \"pa-5\",\n                elevation: \"2\"\n              }, {\n                \"default\": _withCtx(function () {\n                  return [_createVNode(_component_v_card_title, {\n                    \"class\": \"text-h5\"\n                  }, {\n                    \"default\": _withCtx(function () {\n                      return _cache[4] || (_cache[4] = [_createTextVNode(\"로그인\")]);\n                    }),\n                    _: 1 /* STABLE */,\n                    __: [4]\n                  }), _createVNode(_component_v_card_text, null, {\n                    \"default\": _withCtx(function () {\n                      return [_createVNode(_component_v_text_field, {\n                        modelValue: _ctx.username,\n                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n                          return _ctx.username = $event;\n                        }),\n                        label: \"ShotGrid ID\",\n                        required: \"\"\n                      }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_v_text_field, {\n                        modelValue: _ctx.password,\n                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n                          return _ctx.password = $event;\n                        }),\n                        label: \"Password\",\n                        type: \"password\",\n                        required: \"\"\n                      }, null, 8 /* PROPS */, [\"modelValue\"]), _ctx.loginError ? (_openBlock(), _createBlock(_component_v_alert, {\n                        key: 0,\n                        type: \"error\",\n                        dense: \"\",\n                        text: \"\",\n                        \"class\": \"mb-3\"\n                      }, {\n                        \"default\": _withCtx(function () {\n                          return [_createTextVNode(_toDisplayString(_ctx.loginError), 1 /* TEXT */)];\n                        }),\n                        _: 1 /* STABLE */\n                      })) : _createCommentVNode(\"v-if\", true), _createVNode(_component_v_btn, {\n                        color: \"primary\",\n                        onClick: _ctx.login\n                      }, {\n                        \"default\": _withCtx(function () {\n                          return _cache[5] || (_cache[5] = [_createTextVNode(\"로그인\")]);\n                        }),\n                        _: 1 /* STABLE */,\n                        __: [5]\n                      }, 8 /* PROPS */, [\"onClick\"])];\n                    }),\n                    _: 1 /* STABLE */\n                  })];\n                }),\n                _: 1 /* STABLE */\n              })) : (_openBlock(), _createBlock(_component_v_alert, {\n                key: 1,\n                type: \"success\",\n                dense: \"\",\n                text: \"\",\n                \"class\": \"mb-5\"\n              }, {\n                \"default\": _withCtx(function () {\n                  return [_createTextVNode(\" 환영합니다, \" + _toDisplayString(_ctx.loggedInUser) + \"님! \", 1 /* TEXT */)];\n                }),\n                _: 1 /* STABLE */\n              }))];\n            }),\n            _: 1 /* STABLE */\n          }), _createCommentVNode(\" 기존 UI 섹션 (로그인 섹션 아래로 이동) \"), _createVNode(_component_v_container, {\n            \"class\": _normalizeClass({\n              'mt-5': _ctx.loggedInUser\n            })\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_v_autocomplete, {\n                modelValue: _ctx.projectName,\n                \"onUpdate:modelValue\": [_cache[2] || (_cache[2] = function ($event) {\n                  return _ctx.projectName = $event;\n                }), _ctx.onProjectSelected],\n                label: \"Project\",\n                items: _ctx.projects,\n                \"class\": \"mr-4\"\n              }, null, 8 /* PROPS */, [\"modelValue\", \"items\", \"onUpdate:modelValue\"]), _createVNode(_component_v_autocomplete, {\n                modelValue: _ctx.selectedShotName,\n                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n                  return _ctx.selectedShotName = $event;\n                }),\n                label: \"Shot\",\n                items: _ctx.shots.map(function (s) {\n                  return s.code;\n                }),\n                disabled: !_ctx.shots.length,\n                \"class\": \"mr-4\"\n              }, null, 8 /* PROPS */, [\"modelValue\", \"items\", \"disabled\"]), _createVNode(_component_v_btn, {\n                onClick: _ctx.loadVersions,\n                disabled: !_ctx.selectedShotName\n              }, {\n                \"default\": _withCtx(function () {\n                  return _cache[6] || (_cache[6] = [_createTextVNode(\"OK\")]);\n                }),\n                _: 1 /* STABLE */,\n                __: [6]\n              }, 8 /* PROPS */, [\"onClick\", \"disabled\"]), _createVNode(_component_v_btn, {\n                onClick: _ctx.clear,\n                \"class\": \"ml-4\"\n              }, {\n                \"default\": _withCtx(function () {\n                  return _cache[7] || (_cache[7] = [_createTextVNode(\"Clear\")]);\n                }),\n                _: 1 /* STABLE */,\n                __: [7]\n              }, 8 /* PROPS */, [\"onClick\"])]), _createCommentVNode(\" 버전 목록 테이블 \"), _ctx.versions.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_cache[9] || (_cache[9] = _createElementVNode(\"h2\", null, \"버전 목록\", -1 /* CACHED */)), _createVNode(_component_v_data_table, {\n                headers: _ctx.versionHeaders,\n                items: _ctx.versions,\n                \"item-key\": \"id\",\n                \"class\": \"elevation-1\",\n                \"hide-default-footer\": \"\",\n                \"disable-pagination\": \"\"\n              }, {\n                \"item.note\": _withCtx(function (_ref) {\n                  var item = _ref.item;\n                  return [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h3\", null, \"나의 임시 노트 (\" + _toDisplayString(item.code) + \")\", 1 /* TEXT */), _createVNode(_component_v_textarea, {\n                    label: \"여기에 노트를 작성하세요\",\n                    rows: \"3\",\n                    variant: \"outlined\"\n                  })]), _cache[8] || (_cache[8] = _createElementVNode(\"div\", {\n                    \"class\": \"other-notes\"\n                  }, [_createElementVNode(\"h3\", null, \"다른 사람의 임시 노트\"), _createElementVNode(\"p\", null, \"다른 사람의 노트 내용이 여기에 실시간으로 표시됩니다.\")], -1 /* CACHED */))])];\n                }),\n                _: 1 /* STABLE */\n              }, 8 /* PROPS */, [\"headers\", \"items\"])])) : _createCommentVNode(\"v-if\", true)];\n            }),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"class\"])];\n        }),\n        _: 1 /* STABLE */\n      })];\n    }),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["_createBlock","_component_v_app","_createVNode","_component_v_main","_createCommentVNode","_component_v_container","_ctx","loggedInUser","_component_v_card","elevation","_component_v_card_title","_cache","_component_v_card_text","_component_v_text_field","username","$event","label","required","password","type","loginError","_component_v_alert","dense","text","_component_v_btn","color","onClick","login","_toDisplayString","_normalizeClass","_createElementVNode","_hoisted_1","_component_v_autocomplete","projectName","onProjectSelected","items","projects","selectedShotName","shots","map","s","code","disabled","length","loadVersions","clear","versions","_createElementBlock","_hoisted_2","_component_v_data_table","headers","versionHeaders","_withCtx","_ref","item","_hoisted_3","_hoisted_4","_component_v_textarea","rows","variant"],"sources":["/home/idea/td_test/LAZYPIC/PONO/web_test/fast_vue/frontend/src/App.vue"],"sourcesContent":["<template>\n  <v-app>\n    <v-main>\n      <!-- 로그인 섹션 -->\n      <v-container class=\"login-section\">\n        <v-card class=\"pa-5\" elevation=\"2\" v-if=\"!loggedInUser\">\n          <v-card-title class=\"text-h5\">로그인</v-card-title>\n          <v-card-text>\n            <v-text-field\n              v-model=\"username\"\n              label=\"ShotGrid ID\"\n              required\n            ></v-text-field>\n            <v-text-field\n              v-model=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              required\n            ></v-text-field>\n            <v-alert\n              v-if=\"loginError\"\n              type=\"error\"\n              dense\n              text\n              class=\"mb-3\"\n            >{{ loginError }}</v-alert>\n            <v-btn color=\"primary\" @click=\"login\">로그인</v-btn>\n          </v-card-text>\n        </v-card>\n        <v-alert v-else type=\"success\" dense text class=\"mb-5\">\n          환영합니다, {{ loggedInUser }}님!\n        </v-alert>\n      </v-container>\n\n      <!-- 기존 UI 섹션 (로그인 섹션 아래로 이동) -->\n      <v-container :class=\"{'mt-5': loggedInUser}\">\n        <div class=\"d-flex align-center mb-4\">\n          <v-autocomplete\n            v-model=\"projectName\"\n            label=\"Project\"\n            :items=\"projects\"\n            @update:modelValue=\"onProjectSelected\"\n            class=\"mr-4\"\n          ></v-autocomplete>\n          <v-autocomplete\n            v-model=\"selectedShotName\"\n            label=\"Shot\"\n            :items=\"shots.map(s => s.code)\"\n            :disabled=\"!shots.length\"\n            class=\"mr-4\"\n          ></v-autocomplete>\n          <v-btn @click=\"loadVersions\" :disabled=\"!selectedShotName\">OK</v-btn>\n          <v-btn @click=\"clear\" class=\"ml-4\">Clear</v-btn>\n        </div>\n\n        <!-- 버전 목록 테이블 -->\n        <div class=\"versions-section\" v-if=\"versions.length\">\n          <h2>버전 목록</h2>\n          <v-data-table\n            :headers=\"versionHeaders\"\n            :items=\"versions\"\n            item-key=\"id\"\n            class=\"elevation-1\"\n            hide-default-footer\n            disable-pagination\n          >\n            <template v-slot:item.note=\"{ item }\">\n              <div class=\"note-section\">\n                <div class=\"my-note\">\n                  <h3>나의 임시 노트 ({{ item.code }})</h3>\n                  <v-textarea\n                    label=\"여기에 노트를 작성하세요\"\n                    rows=\"3\"\n                    variant=\"outlined\"\n                  ></v-textarea>\n                </div>\n                <div class=\"other-notes\">\n                  <h3>다른 사람의 임시 노트</h3>\n                  <p>다른 사람의 노트 내용이 여기에 실시간으로 표시됩니다.</p>\n                </div>\n              </div>\n            </template>\n          </v-data-table>\n        </div>\n      </v-container>\n    </v-main>\n  </v-app>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport { fetchShots, fetchProjects, fetchVersionsForShot } from './api'\nimport axios from 'axios'; // axios 임포트 추가\n\nexport default {\n  setup() {\n    const projectName = ref('')\n    const projects = ref([])\n    const shots = ref([]) // 선택된 프로젝트의 샷 목록 (autocomplete items)\n    const versions = ref([]) // 버전 목록을 저장할 ref 추가\n    const username = ref('') // 로그인 사용자 이름\n    const password = ref('') // 로그인 비밀번호\n    const loggedInUser = ref(null) // 로그인 성공 시 사용자 이름 저장\n    const loginError = ref(null) // 로그인 에러 메시지\n    const selectedShotName = ref('') // 선택된 샷 이름\n\n    // DB 테스트 관련 변수 추가\n    const dbTestResult = ref(null);\n    const dbTestError = ref(null);\n\n  onMounted(\n      async () => {\n        const projData = await fetchProjects()\n        projects.value = projData.projects || []\n    })\n\n    // 프로젝트 선택 시 해당 프로젝트의 샷 목록을 불러오는 함수\n    async function onProjectSelected() {\n      selectedShotName.value = ''; // 프로젝트 변경 시 샷 선택 초기화\n      versions.value = []; // 프로젝트 변경 시 버전 목록 초기화\n      if (projectName.value) {\n        const data = await fetchShots(projectName.value);\n        shots.value = data.shots || [];\n      } else {\n        shots.value = [];\n      }\n    }\n\n    // 선택된 샷의 버전 목록을 불러오는 함수\n    async function loadVersions() {\n      const selectedShot = shots.value.find(s => s.code === selectedShotName.value);\n      if (selectedShot) {\n        const data = await fetchVersionsForShot(selectedShot.id);\n        versions.value = data.versions || [];\n      }\n    }\n\n    function clear() {\n      projectName.value = ''\n      shots.value = []\n      versions.value = [] // 버전 목록도 초기화\n      selectedShotName.value = '' // 선택된 샷 이름도 초기화\n      loggedInUser.value = null; // 로그인 정보 초기화\n      username.value = '';\n      password.value = '';\n      loginError.value = null;\n    }\n\n    // 로그인 메서드 추가\n    async function login() {\n      loginError.value = null; // 에러 메시지 초기화\n      try {\n        const response = await axios.post('http://localhost:8001/api/auth/login', {\n          username: username.value,\n          password: password.value,\n        });\n        if (response.data.user) {\n          loggedInUser.value = response.data.user.name; // 사용자 이름 저장\n        }\n      } catch (error) {\n        console.error('로그인 실패:', error);\n        loginError.value = '아이디 또는 비밀번호를 다시 확인해주세요.';\n        loggedInUser.value = null;\n      }\n    }\n\n    // DB 연결 테스트 메서드 추가\n    async function testDbConnection() {\n      dbTestResult.value = null;\n      dbTestError.value = null;\n      try {\n        const response = await axios.get('http://localhost:8001/db-test');\n        dbTestResult.value = response.data.message;\n      } catch (error) {\n        console.error('DB 연결 테스트 중 에러 발생:', error);\n        dbTestError.value = error.message;\n        if (error.response && error.response.data && error.response.data.message) {\n          dbTestError.value = error.response.data.message;\n        }\n      }\n    }\n\n    // v-data-table을 위한 헤더 정의\n    const versionHeaders = [\n      { title: '버전 이름', key: 'code', sortable: false },\n      { title: '노트', key: 'note', sortable: false },\n    ];\n\n    return {\n      projectName,\n      projects,\n      shots,\n      selectedShotName, // 반환 객체에 추가\n      username, // 반환 객체에 추가\n      password, // 반환 객체에 추가\n      loggedInUser, // 반환 객체에 추가\n      loginError, // 반환 객체에 추가\n      versions, // 반환 객체에 추가\n      onProjectSelected, // 반환 객체에 추가\n      loadVersions, // 반환 객체에 추가\n      clear,\n      versionHeaders, // 반환 객체에 추가\n      dbTestResult, // 반환 객체에 추가\n      dbTestError,  // 반환 객체에 추가\n      testDbConnection, // 반환 객체에 추가\n      login // 반환 객체에 추가\n    };\n</script>\n\n<style src=\"./assets/styles.css\"></style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}