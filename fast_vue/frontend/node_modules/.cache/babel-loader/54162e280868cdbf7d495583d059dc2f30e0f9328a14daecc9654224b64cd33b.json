{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nvar _hoisted_1 = {\n  key: 0,\n  \"class\": \"versions-section\"\n};\nvar _hoisted_2 = {\n  \"class\": \"d-flex align-center mb-2\"\n};\nvar _hoisted_3 = {\n  \"class\": \"note-section\"\n};\nvar _hoisted_4 = {\n  \"class\": \"my-note\"\n};\nvar _hoisted_5 = {\n  \"class\": \"other-notes\"\n};\nvar _hoisted_6 = {\n  \"class\": \"d-flex justify-space-between align-center px-2 pb-1\"\n};\nvar _hoisted_7 = {\n  \"class\": \"text-subtitle-2 text-grey-darken-1\"\n};\nvar _hoisted_8 = {\n  \"class\": \"text-caption text-right text-grey-darken-1\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_v_btn = _resolveComponent(\"v-btn\");\n  var _component_v_textarea = _resolveComponent(\"v-textarea\");\n  var _component_v_card_text = _resolveComponent(\"v-card-text\");\n  var _component_v_divider = _resolveComponent(\"v-divider\");\n  var _component_v_card = _resolveComponent(\"v-card\");\n  var _component_v_data_table = _resolveComponent(\"v-data-table\");\n  return $props.versions.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[1] || (_cache[1] = _createElementVNode(\"h2\", {\n    \"class\": \"mr-2\"\n  }, \"Version\", -1 /* CACHED */)), _createVNode(_component_v_btn, {\n    icon: \"mdi-refresh\",\n    size: \"small\",\n    variant: \"text\",\n    onClick: _cache[0] || (_cache[0] = function ($event) {\n      return $setup.emit('refresh-versions');\n    })\n  })]), _createVNode(_component_v_data_table, {\n    headers: $setup.versionHeaders,\n    items: $props.versions,\n    \"item-key\": \"id\",\n    \"class\": \"elevation-1\",\n    \"hide-default-footer\": \"\",\n    \"disable-pagination\": \"\"\n  }, {\n    \"item.note\": _withCtx(function (_ref) {\n      var item = _ref.item;\n      return [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h3\", null, \"My Draft Note (\" + _toDisplayString(item.code) + \")\", 1 /* TEXT */), _createVNode(_component_v_textarea, {\n        label: \"여기에 노트를 작성하세요\",\n        rows: \"3\",\n        modelValue: $setup.localNotesContent[item.id],\n        \"onUpdate:modelValue\": function onUpdateModelValue($event) {\n          return $setup.localNotesContent[item.id] = $event;\n        },\n        onInput: function onInput($event) {\n          return $setup.emit('input-note', item.id, $setup.localNotesContent[item.id]);\n        },\n        onBlur: function onBlur($event) {\n          return $setup.emit('save-note', item.id, $setup.localNotesContent[item.id]);\n        },\n        variant: \"outlined\",\n        \"class\": _normalizeClass({\n          'saving-note': !!$props.isSaving[item.id]\n        })\n      }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\", \"onInput\", \"onBlur\", \"class\"])]), _createElementVNode(\"div\", _hoisted_5, [_cache[3] || (_cache[3] = _createElementVNode(\"h3\", null, \"Others Draft Notes\", -1 /* CACHED */)), _createVNode(_component_v_card, {\n        variant: \"outlined\",\n        \"class\": \"notes-container\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [$props.notesComposable.otherNotes.value[item.id] && $props.notesComposable.otherNotes.value[item.id].length ? (_openBlock(true), _createElementBlock(_Fragment, {\n            key: 0\n          }, _renderList($props.notesComposable.otherNotes.value[item.id], function (note, index) {\n            return _openBlock(), _createElementBlock(\"div\", {\n              key: note.id\n            }, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"span\", _hoisted_7, _toDisplayString(note.owner.username), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_8, _toDisplayString($setup.formatDateTime(note.updated_at)), 1 /* TEXT */)]), _createVNode(_component_v_card_text, {\n              \"class\": \"note-content text-body-2 pa-2\"\n            }, {\n              \"default\": _withCtx(function () {\n                return [_createTextVNode(_toDisplayString(note.content), 1 /* TEXT */)];\n              }),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */), index < $props.notesComposable.otherNotes.value[item.id].length - 1 ? (_openBlock(), _createBlock(_component_v_divider, {\n              key: 0\n            })) : _createCommentVNode(\"v-if\", true)]);\n          }), 128 /* KEYED_FRAGMENT */)) : (_openBlock(), _createBlock(_component_v_card_text, {\n            key: 1\n          }, {\n            \"default\": _withCtx(function () {\n              return _cache[2] || (_cache[2] = [_createTextVNode(\" 다른 사용자의 노트가 없습니다. \")]);\n            }),\n            _: 1 /* STABLE */,\n            __: [2]\n          }))];\n        }),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */)])])];\n    }),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"items\"])])) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"names":["$props","versions","length","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_v_btn","icon","size","variant","onClick","_cache","$event","$setup","emit","_component_v_data_table","headers","versionHeaders","items","_withCtx","_ref","item","_hoisted_3","_hoisted_4","_toDisplayString","code","_component_v_textarea","label","rows","localNotesContent","id","onInput","onBlur","_normalizeClass","isSaving","_hoisted_5","_component_v_card","notesComposable","otherNotes","value","_Fragment","key","_renderList","note","index","_hoisted_6","_hoisted_7","owner","username","_hoisted_8","formatDateTime","updated_at","_component_v_card_text","content","_createBlock","_component_v_divider"],"sources":["/home/idea/td_test/LAZYPIC/PONO/web_test/fast_vue/frontend/src/components/VersionTable.vue"],"sourcesContent":["<!-- frontend/src/components/VersionTable.vue -->\n<template>\n  <div class=\"versions-section\" v-if=\"versions.length\">\n    <div class=\"d-flex align-center mb-2\">\n      <h2 class=\"mr-2\">Version</h2>\n      <v-btn icon=\"mdi-refresh\" size=\"small\" variant=\"text\" @click=\"emit('refresh-versions')\"></v-btn>\n    </div>\n    <v-data-table\n      :headers=\"versionHeaders\"\n      :items=\"versions\"\n      item-key=\"id\"\n      class=\"elevation-1\"\n      hide-default-footer\n      disable-pagination\n    >\n      <template v-slot:item.note=\"{ item }\">\n        <div class=\"note-section\">\n          <div class=\"my-note\">\n            <h3>My Draft Note ({{ item.code }})</h3>\n            <v-textarea\n              label=\"여기에 노트를 작성하세요\"\n              rows=\"3\"\n              v-model=\"localNotesContent[item.id]\"\n              @input=\"emit('input-note', item.id, localNotesContent[item.id])\"\n              @blur=\"emit('save-note', item.id, localNotesContent[item.id])\"\n              variant=\"outlined\"\n              :class=\"{ 'saving-note': !!isSaving[item.id] }\"\n            ></v-textarea>\n          </div>\n          <div class=\"other-notes\">\n            <h3>Others Draft Notes</h3>\n            <v-card variant=\"outlined\" class=\"notes-container\">\n              <template v-if=\"notesComposable.otherNotes.value[item.id] && notesComposable.otherNotes.value[item.id].length\">\n                <div v-for=\"(note, index) in notesComposable.otherNotes.value[item.id]\" :key=\"note.id\">\n                  <div class=\"d-flex justify-space-between align-center px-2 pb-1\">\n                    <span class=\"text-subtitle-2 text-grey-darken-1\">{{ note.owner.username }}</span>\n                    <span class=\"text-caption text-right text-grey-darken-1\">{{ formatDateTime(note.updated_at) }}</span>\n                  </div>\n                  <v-card-text class=\"note-content text-body-2 pa-2\">\n                    {{ note.content }}\n                  </v-card-text>\n                  <v-divider v-if=\"index < notesComposable.otherNotes.value[item.id].length - 1\"></v-divider>\n                </div>\n              </template>\n              <v-card-text v-else>\n                다른 사용자의 노트가 없습니다.\n              </v-card-text>\n            </v-card>\n          </div>\n        </div>\n      </template>\n    </v-data-table>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue';\n\nconst props = defineProps({\n  versions: Array,\n  notes: Object, // notesContent 객체 (초기값 및 외부 업데이트용)\n  notesComposable: Object, // notes composable 전체를 받음\n  isSaving: Object, // isSaving prop 타입을 Object로 변경\n});\n\nconst emit = defineEmits(['save-note', 'input-note', 'refresh-versions']); // emit 이벤트 추가\n\nconst versionHeaders = [\n  { title: 'Version', key: 'code', sortable: false },\n  { title: 'Note', key: 'note', sortable: false },\n];\n\n// 로컬 노트 내용을 저장할 반응형 객체\nconst localNotesContent = ref({});\n\n// props.notes가 변경될 때 localNotesContent를 초기화\nwatch(() => props.notes, (newNotes) => {\n  localNotesContent.value = { ...newNotes };\n}, { immediate: true, deep: true });\n\n// 날짜 포맷팅 함수\nconst formatDateTime = (isoString) => {\n  if (!isoString) return '';\n  const date = new Date(isoString);\n  // ko-KR 로케일을 사용하여 'YYYY. MM. DD. HH:mm:ss' 형식으로 변환\n  return date.toLocaleString('ko-KR', {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n    hour12: false\n  }).replace(/\\.\\s/g, '.').slice(0, -1); // 마지막 '.' 제거\n};\n\n</script>\n\n<style scoped>\n/* v-textarea 컴포넌트에 saving-note 클래스가 있을 때, 내부의 v-field__field에 스타일 적용 */\n::v-deep .v-textarea.saving-note .v-field__field {\n  transition: background-color 0.5s ease-in-out; /* 트랜지션 시간 증가 */\n  background-color: #E0F2F7; /* 연한 파란색 배경 */\n}\n/* 저장 완료 후 원래 색상으로 돌아오도록 CSS 트랜지션 추가 */\n\n.notes-container {\n  height: 115px; /* v-textarea의 높이와 유사하게 설정 */\n  overflow-y: auto; /* 내용이 많아지면 스크롤바 표시 */\n}\n\n.note-content {\n  white-space: pre-wrap; /* 줄바꿈 및 공백 유지 */\n  word-wrap: break-word; /* 긴 단어가 영역을 벗어나지 않도록 줄바꿈 */\n  line-height: 1.4;\n}\n\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}