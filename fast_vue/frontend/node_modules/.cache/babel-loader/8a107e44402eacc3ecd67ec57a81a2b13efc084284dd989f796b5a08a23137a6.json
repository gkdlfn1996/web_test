{"ast":null,"code":"import _objectSpread from \"/home/idea/td_test/LAZYPIC/PONO/web_test/fast_vue/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _createForOfIteratorHelper from \"/home/idea/td_test/LAZYPIC/PONO/web_test/fast_vue/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _typeof from \"/home/idea/td_test/LAZYPIC/PONO/web_test/fast_vue/frontend/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _slicedToArray from \"/home/idea/td_test/LAZYPIC/PONO/web_test/fast_vue/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n/* eslint-disable max-statements */\n/* eslint-disable no-labels */\n\n// Utilities\nimport { computed, shallowRef, unref, watchEffect, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, Fragment as _Fragment } from 'vue';\nimport { getPropertyFromItem, propsFactory, wrapInArray } from \"../util/index.js\"; // Types\n/**\n * - boolean: match without highlight\n * - number: single match (index), length already known\n * - []: single match (start, end)\n * - [][]: multiple matches (start, end), shouldn't overlap\n */\n// Composables\nexport var defaultFilter = function defaultFilter(value, query, item) {\n  if (value == null || query == null) return -1;\n  if (!query.length) return 0;\n  value = value.toString().toLocaleLowerCase();\n  query = query.toString().toLocaleLowerCase();\n  var result = [];\n  var idx = value.indexOf(query);\n  while (~idx) {\n    result.push([idx, idx + query.length]);\n    idx = value.indexOf(query, idx + query.length);\n  }\n  return result.length ? result : -1;\n};\nfunction normaliseMatch(match, query) {\n  if (match == null || typeof match === 'boolean' || match === -1) return;\n  if (typeof match === 'number') return [[match, match + query.length]];\n  if (Array.isArray(match[0])) return match;\n  return [match];\n}\nexport var makeFilterProps = propsFactory({\n  customFilter: Function,\n  customKeyFilter: Object,\n  filterKeys: [Array, String],\n  filterMode: {\n    type: String,\n    \"default\": 'intersection'\n  },\n  noFilter: Boolean\n}, 'filter');\nexport function filterItems(items, query, options) {\n  var _options$default, _options$customKeyFil;\n  var array = [];\n  // always ensure we fall back to a functioning filter\n  var filter = (_options$default = options === null || options === void 0 ? void 0 : options[\"default\"]) !== null && _options$default !== void 0 ? _options$default : defaultFilter;\n  var keys = options !== null && options !== void 0 && options.filterKeys ? wrapInArray(options.filterKeys) : false;\n  var customFiltersLength = Object.keys((_options$customKeyFil = options === null || options === void 0 ? void 0 : options.customKeyFilter) !== null && _options$customKeyFil !== void 0 ? _options$customKeyFil : {}).length;\n  if (!(items !== null && items !== void 0 && items.length)) return array;\n  loop: for (var i = 0; i < items.length; i++) {\n    var _wrapInArray = wrapInArray(items[i]),\n      _wrapInArray2 = _slicedToArray(_wrapInArray, 2),\n      item = _wrapInArray2[0],\n      _wrapInArray2$ = _wrapInArray2[1],\n      transformed = _wrapInArray2$ === void 0 ? item : _wrapInArray2$;\n    var customMatches = {};\n    var defaultMatches = {};\n    var match = -1;\n    if ((query || customFiltersLength > 0) && !(options !== null && options !== void 0 && options.noFilter)) {\n      if (_typeof(item) === 'object') {\n        var filterKeys = keys || Object.keys(transformed);\n        var _iterator = _createForOfIteratorHelper(filterKeys),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _options$customKeyFil2;\n            var key = _step.value;\n            var value = getPropertyFromItem(transformed, key);\n            var keyFilter = options === null || options === void 0 || (_options$customKeyFil2 = options.customKeyFilter) === null || _options$customKeyFil2 === void 0 ? void 0 : _options$customKeyFil2[key];\n            match = keyFilter ? keyFilter(value, query, item) : filter(value, query, item);\n            if (match !== -1 && match !== false) {\n              if (keyFilter) customMatches[key] = normaliseMatch(match, query);else defaultMatches[key] = normaliseMatch(match, query);\n            } else if ((options === null || options === void 0 ? void 0 : options.filterMode) === 'every') {\n              continue loop;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      } else {\n        match = filter(item, query, item);\n        if (match !== -1 && match !== false) {\n          defaultMatches.title = normaliseMatch(match, query);\n        }\n      }\n      var defaultMatchesLength = Object.keys(defaultMatches).length;\n      var customMatchesLength = Object.keys(customMatches).length;\n      if (!defaultMatchesLength && !customMatchesLength) continue;\n      if ((options === null || options === void 0 ? void 0 : options.filterMode) === 'union' && customMatchesLength !== customFiltersLength && !defaultMatchesLength) continue;\n      if ((options === null || options === void 0 ? void 0 : options.filterMode) === 'intersection' && (customMatchesLength !== customFiltersLength || !defaultMatchesLength)) continue;\n    }\n    array.push({\n      index: i,\n      matches: _objectSpread(_objectSpread({}, defaultMatches), customMatches)\n    });\n  }\n  return array;\n}\nexport function useFilter(props, items, query, options) {\n  var filteredItems = shallowRef([]);\n  var filteredMatches = shallowRef(new Map());\n  var transformedItems = computed(function () {\n    return options !== null && options !== void 0 && options.transform ? unref(items).map(function (item) {\n      return [item, options.transform(item)];\n    }) : unref(items);\n  });\n  watchEffect(function () {\n    var _query = typeof query === 'function' ? query() : unref(query);\n    var strQuery = typeof _query !== 'string' && typeof _query !== 'number' ? '' : String(_query);\n    var results = filterItems(transformedItems.value, strQuery, {\n      customKeyFilter: _objectSpread(_objectSpread({}, props.customKeyFilter), unref(options === null || options === void 0 ? void 0 : options.customKeyFilter)),\n      \"default\": props.customFilter,\n      filterKeys: props.filterKeys,\n      filterMode: props.filterMode,\n      noFilter: props.noFilter\n    });\n    var originalItems = unref(items);\n    var _filteredItems = [];\n    var _filteredMatches = new Map();\n    results.forEach(function (_ref) {\n      var index = _ref.index,\n        matches = _ref.matches;\n      var item = originalItems[index];\n      _filteredItems.push(item);\n      _filteredMatches.set(item.value, matches);\n    });\n    filteredItems.value = _filteredItems;\n    filteredMatches.value = _filteredMatches;\n  });\n  function getMatches(item) {\n    return filteredMatches.value.get(item.value);\n  }\n  return {\n    filteredItems: filteredItems,\n    filteredMatches: filteredMatches,\n    getMatches: getMatches\n  };\n}\nexport function highlightResult(name, text, matches) {\n  if (matches == null || !matches.length) return text;\n  return matches.map(function (match, i) {\n    var start = i === 0 ? 0 : matches[i - 1][1];\n    var result = [_createElementVNode(\"span\", {\n      \"class\": _normalizeClass(\"\".concat(name, \"__unmask\"))\n    }, [text.slice(start, match[0])]), _createElementVNode(\"span\", {\n      \"class\": _normalizeClass(\"\".concat(name, \"__mask\"))\n    }, [text.slice(match[0], match[1])])];\n    if (i === matches.length - 1) {\n      result.push(_createElementVNode(\"span\", {\n        \"class\": _normalizeClass(\"\".concat(name, \"__unmask\"))\n      }, [text.slice(match[1])]));\n    }\n    return _createElementVNode(_Fragment, null, [result]);\n  });\n}","map":{"version":3,"names":["computed","shallowRef","unref","watchEffect","normalizeClass","_normalizeClass","createElementVNode","_createElementVNode","Fragment","_Fragment","getPropertyFromItem","propsFactory","wrapInArray","defaultFilter","value","query","item","length","toString","toLocaleLowerCase","result","idx","indexOf","push","normaliseMatch","match","Array","isArray","makeFilterProps","customFilter","Function","customKeyFilter","Object","filterKeys","String","filterMode","type","noFilter","Boolean","filterItems","items","options","_options$default","_options$customKeyFil","array","filter","keys","customFiltersLength","loop","i","_wrapInArray","_wrapInArray2","_slicedToArray","_wrapInArray2$","transformed","customMatches","defaultMatches","_typeof","_iterator","_createForOfIteratorHelper","_step","s","n","done","_options$customKeyFil2","key","keyFilter","err","e","f","title","defaultMatchesLength","customMatchesLength","index","matches","_objectSpread","useFilter","props","filteredItems","filteredMatches","Map","transformedItems","transform","map","_query","strQuery","results","originalItems","_filteredItems","_filteredMatches","forEach","_ref","set","getMatches","get","highlightResult","name","text","start","concat","slice"],"sources":["../../src/composables/filter.tsx"],"sourcesContent":["/* eslint-disable max-statements */\n/* eslint-disable no-labels */\n\n// Utilities\nimport { computed, shallowRef, unref, watchEffect } from 'vue'\nimport { getPropertyFromItem, propsFactory, wrapInArray } from '@/util'\n\n// Types\nimport type { PropType, Ref } from 'vue'\nimport type { MaybeRef } from '@/util'\n\n/**\n * - boolean: match without highlight\n * - number: single match (index), length already known\n * - []: single match (start, end)\n * - [][]: multiple matches (start, end), shouldn't overlap\n */\nexport type FilterMatchArraySingle = readonly [number, number]\nexport type FilterMatchArrayMultiple = readonly FilterMatchArraySingle[]\nexport type FilterMatchArray = FilterMatchArraySingle | FilterMatchArrayMultiple\nexport type FilterMatch = boolean | number | FilterMatchArray\nexport type FilterFunction = (value: string, query: string, item?: InternalItem) => FilterMatch\nexport type FilterKeyFunctions = Record<string, FilterFunction>\nexport type FilterKeys = string | string[]\nexport type FilterMode = 'some' | 'every' | 'union' | 'intersection'\n\nexport interface FilterProps {\n  customFilter?: FilterFunction\n  customKeyFilter?: FilterKeyFunctions\n  filterKeys?: FilterKeys\n  filterMode?: FilterMode\n  noFilter?: boolean\n}\n\nexport interface InternalItem<T = any> {\n  value: any\n  raw: T\n}\n\n// Composables\nexport const defaultFilter: FilterFunction = (value, query, item) => {\n  if (value == null || query == null) return -1\n  if (!query.length) return 0\n\n  value = value.toString().toLocaleLowerCase()\n  query = query.toString().toLocaleLowerCase()\n\n  const result = []\n  let idx = value.indexOf(query)\n  while (~idx) {\n    result.push([idx, idx + query.length] as const)\n\n    idx = value.indexOf(query, idx + query.length)\n  }\n\n  return result.length ? result : -1\n}\n\nfunction normaliseMatch (match: FilterMatch, query: string): FilterMatchArrayMultiple | undefined {\n  if (match == null || typeof match === 'boolean' || match === -1) return\n  if (typeof match === 'number') return [[match, match + query.length]]\n  if (Array.isArray(match[0])) return match as FilterMatchArrayMultiple\n  return [match] as FilterMatchArrayMultiple\n}\n\nexport const makeFilterProps = propsFactory({\n  customFilter: Function as PropType<FilterFunction>,\n  customKeyFilter: Object as PropType<FilterKeyFunctions>,\n  filterKeys: [Array, String] as PropType<FilterKeys>,\n  filterMode: {\n    type: String as PropType<FilterMode>,\n    default: 'intersection',\n  },\n  noFilter: Boolean,\n}, 'filter')\n\nexport function filterItems (\n  items: readonly (readonly [item: InternalItem, transformed: {}])[] | readonly InternalItem[],\n  query: string,\n  options?: {\n    customKeyFilter?: FilterKeyFunctions\n    default?: FilterFunction\n    filterKeys?: FilterKeys\n    filterMode?: FilterMode\n    noFilter?: boolean\n  },\n) {\n  const array: { index: number, matches: Record<string, FilterMatchArrayMultiple | undefined> }[] = []\n  // always ensure we fall back to a functioning filter\n  const filter = options?.default ?? defaultFilter\n  const keys = options?.filterKeys ? wrapInArray(options.filterKeys) : false\n  const customFiltersLength = Object.keys(options?.customKeyFilter ?? {}).length\n\n  if (!items?.length) return array\n\n  loop:\n  for (let i = 0; i < items.length; i++) {\n    const [item, transformed = item] = wrapInArray(items[i]) as readonly [InternalItem, {}]\n    const customMatches: Record<string, FilterMatchArrayMultiple | undefined> = {}\n    const defaultMatches: Record<string, FilterMatchArrayMultiple | undefined> = {}\n    let match: FilterMatch = -1\n\n    if ((query || customFiltersLength > 0) && !options?.noFilter) {\n      if (typeof item === 'object') {\n        const filterKeys = keys || Object.keys(transformed)\n\n        for (const key of filterKeys) {\n          const value = getPropertyFromItem(transformed, key)\n          const keyFilter = options?.customKeyFilter?.[key]\n\n          match = keyFilter\n            ? keyFilter(value, query, item)\n            : filter(value, query, item)\n\n          if (match !== -1 && match !== false) {\n            if (keyFilter) customMatches[key] = normaliseMatch(match, query)\n            else defaultMatches[key] = normaliseMatch(match, query)\n          } else if (options?.filterMode === 'every') {\n            continue loop\n          }\n        }\n      } else {\n        match = filter(item, query, item)\n        if (match !== -1 && match !== false) {\n          defaultMatches.title = normaliseMatch(match, query)\n        }\n      }\n\n      const defaultMatchesLength = Object.keys(defaultMatches).length\n      const customMatchesLength = Object.keys(customMatches).length\n\n      if (!defaultMatchesLength && !customMatchesLength) continue\n\n      if (\n        options?.filterMode === 'union' &&\n        customMatchesLength !== customFiltersLength &&\n        !defaultMatchesLength\n      ) continue\n\n      if (\n        options?.filterMode === 'intersection' &&\n        (\n          customMatchesLength !== customFiltersLength ||\n          !defaultMatchesLength\n        )\n      ) continue\n    }\n\n    array.push({ index: i, matches: { ...defaultMatches, ...customMatches } })\n  }\n\n  return array\n}\n\nexport function useFilter <T extends InternalItem> (\n  props: FilterProps,\n  items: MaybeRef<T[]>,\n  query: Ref<string | undefined> | (() => string | undefined),\n  options?: {\n    transform?: (item: T) => {}\n    customKeyFilter?: MaybeRef<FilterKeyFunctions | undefined>\n  }\n) {\n  const filteredItems = shallowRef<T[]>([])\n  const filteredMatches = shallowRef(new Map<unknown, Record<string, FilterMatchArrayMultiple | undefined>>())\n  const transformedItems = computed(() => (\n    options?.transform\n      ? unref(items).map(item => ([item, options.transform!(item)] as const))\n      : unref(items)\n  ))\n\n  watchEffect(() => {\n    const _query = typeof query === 'function' ? query() : unref(query)\n    const strQuery = (\n      typeof _query !== 'string' &&\n      typeof _query !== 'number'\n    ) ? '' : String(_query)\n\n    const results = filterItems(\n      transformedItems.value,\n      strQuery,\n      {\n        customKeyFilter: {\n          ...props.customKeyFilter,\n          ...unref(options?.customKeyFilter),\n        },\n        default: props.customFilter,\n        filterKeys: props.filterKeys,\n        filterMode: props.filterMode,\n        noFilter: props.noFilter,\n      },\n    )\n\n    const originalItems = unref(items)\n\n    const _filteredItems: typeof filteredItems['value'] = []\n    const _filteredMatches: typeof filteredMatches['value'] = new Map()\n    results.forEach(({ index, matches }) => {\n      const item = originalItems[index]\n      _filteredItems.push(item)\n      _filteredMatches.set(item.value, matches)\n    })\n    filteredItems.value = _filteredItems\n    filteredMatches.value = _filteredMatches\n  })\n\n  function getMatches (item: T) {\n    return filteredMatches.value.get(item.value)\n  }\n\n  return { filteredItems, filteredMatches, getMatches }\n}\n\nexport function highlightResult (name: string, text: string, matches: FilterMatchArrayMultiple | undefined) {\n  if (matches == null || !matches.length) return text\n\n  return matches.map((match, i) => {\n    const start = i === 0 ? 0 : matches[i - 1][1]\n    const result = [\n      <span class={ `${name}__unmask` }>{ text.slice(start, match[0]) }</span>,\n      <span class={ `${name}__mask` }>{ text.slice(match[0], match[1]) }</span>,\n    ]\n    if (i === matches.length - 1) {\n      result.push(<span class={ `${name}__unmask` }>{ text.slice(match[1]) }</span>)\n    }\n    return <>{ result }</>\n  })\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}